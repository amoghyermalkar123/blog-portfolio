// Code generated by templ - DO NOT EDIT.

// templ: version: v0.2.731
// web/pages/admin/tags.templ

package admin

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"blog-portfolio/internal/models"
	"blog-portfolio/web/layouts"
	"fmt"
)

type TagListData struct {
	Tags []models.Tag
}

func Tags(data TagListData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<div class=\"px-4 sm:px-6 lg:px-8\"><div class=\"sm:flex sm:items-center\"><div class=\"sm:flex-auto\"><h1 class=\"text-2xl font-semibold text-neutral-900 dark:text-white\">Tags</h1><p class=\"mt-2 text-sm text-neutral-700 dark:text-neutral-300\">A list of all your blog tags and their usage statistics.</p></div><div class=\"mt-4 sm:mt-0 sm:ml-16 sm:flex-none\"><button type=\"button\" onclick=\"window.createTagModal.showModal()\" class=\"inline-flex items-center justify-center rounded-md border border-transparent \n                                   bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 \n                                   focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto\">Create Tag</button></div></div><div class=\"mt-8 flex flex-col\"><div class=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\"><div class=\"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8\"><div class=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg\"><table class=\"min-w-full divide-y divide-neutral-300 dark:divide-neutral-700\"><thead class=\"bg-neutral-50 dark:bg-neutral-800\"><tr><th scope=\"col\" class=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-neutral-900 dark:text-white sm:pl-6\">Name</th><th scope=\"col\" class=\"px-3 py-3.5 text-left text-sm font-semibold text-neutral-900 dark:text-white\">Slug</th><th scope=\"col\" class=\"px-3 py-3.5 text-left text-sm font-semibold text-neutral-900 dark:text-white\">Posts</th><th scope=\"col\" class=\"relative py-3.5 pl-3 pr-4 sm:pr-6\"><span class=\"sr-only\">Actions</span></th></tr></thead> <tbody class=\"divide-y divide-neutral-200 dark:divide-neutral-700 bg-white dark:bg-neutral-900\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, tag := range data.Tags {
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<tr id=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var3 string
				templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs("tag-" + fmt.Sprint(tag.ID))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/pages/admin/tags.templ`, Line: 60, Col: 50}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"><td class=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-neutral-900 dark:text-white sm:pl-6\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var4 string
				templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(tag.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/pages/admin/tags.templ`, Line: 63, Col: 28}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</td><td class=\"whitespace-nowrap px-3 py-4 text-sm text-neutral-500 dark:text-neutral-400\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var5 string
				templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(tag.Slug)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/pages/admin/tags.templ`, Line: 66, Col: 28}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</td><td class=\"whitespace-nowrap px-3 py-4 text-sm text-neutral-500 dark:text-neutral-400\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var6 string
				templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprint(tag.PostCount))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/pages/admin/tags.templ`, Line: 69, Col: 45}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</td><td class=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6\"><div class=\"flex justify-end gap-2\"><button @click=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var7 string
				templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("editTag(%d, %q)", tag.ID, tag.Name))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/pages/admin/tags.templ`, Line: 73, Col: 85}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\" class=\"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300\">Edit</button> <button hx-delete=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var8 string
				templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("/api/tags/%d", tag.ID))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/pages/admin/tags.templ`, Line: 77, Col: 75}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\" hx-confirm=\"Are you sure you want to delete this tag?\" hx-target=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var9 string
				templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("#tag-%d", tag.ID))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `web/pages/admin/tags.templ`, Line: 78, Col: 119}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\" hx-swap=\"outerHTML\" class=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\">Delete</button></div></td></tr>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</tbody></table></div></div></div></div><dialog id=\"createTagModal\" class=\"rounded-lg shadow-xl dark:bg-neutral-800\"><div class=\"p-6\"><h3 class=\"text-lg font-medium text-neutral-900 dark:text-white\">Create New Tag</h3><form id=\"createTagForm\" class=\"mt-4\"><div><label for=\"tagName\" class=\"block text-sm font-medium text-neutral-700 dark:text-neutral-300\">Tag Name</label> <input type=\"text\" name=\"name\" id=\"tagName\" required class=\"mt-1 block w-full rounded-md border-neutral-300 dark:border-neutral-700 \n                                          shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\n                                          dark:bg-neutral-700 dark:text-white\"></div><div class=\"mt-4 flex justify-end space-x-2\"><button type=\"button\" onclick=\"window.createTagModal.close()\" class=\"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300\n                                           bg-white dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 \n                                           rounded-md hover:bg-neutral-50 dark:hover:bg-neutral-600\">Cancel</button> <button type=\"submit\" class=\"px-4 py-2 text-sm font-medium text-white bg-primary-600 \n                                           rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 \n                                           focus:ring-offset-2 focus:ring-primary-500\">Create</button></div></form></div></dialog><dialog id=\"editTagModal\" class=\"rounded-lg shadow-xl dark:bg-neutral-800\"><div class=\"p-6\"><h3 class=\"text-lg font-medium text-neutral-900 dark:text-white\">Edit Tag</h3><form id=\"editTagForm\" class=\"mt-4\"><input type=\"hidden\" id=\"editTagId\"><div><label for=\"editTagName\" class=\"block text-sm font-medium text-neutral-700 dark:text-neutral-300\">Tag Name</label> <input type=\"text\" name=\"name\" id=\"editTagName\" required class=\"mt-1 block w-full rounded-md border-neutral-300 dark:border-neutral-700 \n                                          shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\n                                          dark:bg-neutral-700 dark:text-white\"></div><div class=\"mt-4 flex justify-end space-x-2\"><button type=\"button\" onclick=\"window.editTagModal.close()\" class=\"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300\n                                           bg-white dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 \n                                           rounded-md hover:bg-neutral-50 dark:hover:bg-neutral-600\">Cancel</button> <button type=\"submit\" class=\"px-4 py-2 text-sm font-medium text-white bg-primary-600 \n                                           rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 \n                                           focus:ring-offset-2 focus:ring-primary-500\">Update</button></div></form></div></dialog><script>\n    // Handle create tag form submission\n    document.getElementById('createTagForm').addEventListener('submit', async (e) => {\n      e.preventDefault();\n      const form = e.target;\n      const name = form.querySelector('#tagName').value;\n\n      try {\n        const response = await fetch('/api/tags', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({name}),\n        });\n\n        if (!response.ok) throw new Error('Failed to create tag');\n\n        // Refresh the page to show the new tag\n        window.location.reload();\n      } catch (error) {\n        console.error('Error creating tag:', error);\n        alert('Failed to create tag. Please try again.');\n      }\n    });\n\n    // Handle edit tag\n    function editTag(id, name) {\n      document.getElementById('editTagId').value = id;\n      document.getElementById('editTagName').value = name;\n      window.editTagModal.showModal();\n    }\n\n    // Handle edit tag form submission\n    document.getElementById('editTagForm').addEventListener('submit', async (e) => {\n      e.preventDefault();\n      const form = e.target;\n      const id = form.querySelector('#editTagId').value;\n      const name = form.querySelector('#editTagName').value;\n\n      try {\n        const response = await fetch(`/api/tags/${id}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({name}),\n        });\n\n        if (!response.ok) throw new Error('Failed to update tag');\n\n        // Refresh the page to show the updated tag\n        window.location.reload();\n      } catch (error) {\n        console.error('Error updating tag:', error);\n        alert('Failed to update tag. Please try again.');\n      }\n    });\n  </script></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return templ_7745c5c3_Err
		})
		templ_7745c5c3_Err = layouts.Admin(layouts.PageData{
			Title:       "Tags | Admin",
			Description: "Manage blog tags",
		}).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return templ_7745c5c3_Err
	})
}
